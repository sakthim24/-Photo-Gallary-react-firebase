(this.webpackJsonpphoto_gallary=this.webpackJsonpphoto_gallary||[]).push([[0],{52:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(30),s=a.n(r),o=(a(81),a(52),a(22)),i=a(16),l=a(66);a(89),a(88);l.a.initializeApp({apiKey:"AIzaSyB2jvsrjSR9BzOARLRSQ0NPox_R3iPBTII",authDomain:"photo-gallary-b0d97.firebaseapp.com",projectId:"photo-gallary-b0d97",storageBucket:"photo-gallary-b0d97.appspot.com",messagingSenderId:"874020015562",appId:"1:874020015562:web:8593827d601e0da0589333",measurementId:"G-YDVZ4HYGGY"});var u=l.a.firestore(),d=l.a.storage(),j=a(57),m=a(56),b=a(91),f=a(98),g=a(92),h=a(32),O=a.n(h),p=a(4),x=function(e){var t=e.images,a=e.setImages,n=e.allImages,c=e.setAllImages;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(b.a,{fluid:!0,children:Object(p.jsx)("div",{className:"container",children:t.length<1?Object(p.jsx)("h1",{className:"text-center my-5",children:"No Images Found"}):t.map((function(e,t){return Object(p.jsxs)(f.a,{className:"mb-2 mx-auto col-md-3",style:{width:"100%"},children:[Object(p.jsx)(f.a.Body,{children:Object(p.jsx)(f.a.Img,{src:e.data.url,alt:e.data.name})}),Object(p.jsx)(f.a.Footer,{className:"navbar-custom",children:Object(p.jsxs)(f.a.Title,{children:[e.data.name," ",Object(p.jsx)(g.a,{variant:"white",type:"button",style:{marginLeft:"auto"},onClick:function(){return t=e.id,r=e.data.url,void O()({title:"Are you sure?",text:"Once deleted, you will not be able to recover this image!",icon:"warning",buttons:!0,dangerMode:!0}).then((function(e){e?(d.refFromURL(r).delete().then((function(){u.collection("images").doc(t).delete().then((function(){c(n.filter((function(e){return e.data.url!==r}))),a((function(e){return e.filter((function(e){return e.id!==t}))}))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)})),O()("Poof! Your image has been deleted!",{icon:"success"})):O()("Your image is safe!")}));var t,r},children:Object(p.jsx)(m.a,{icon:j.b})})]})})]},t)}))})})})},y=a(2),v=a.n(y),I=a(6),w=a(94),S=a(99),N=a(96),k=a(97),B=a(74),F=a(95),C=function(e){var t=e.setImages,a=e.images,c=e.setAllImages,r=Object(n.useState)(!1),s=Object(i.a)(r,2),l=s[0],b=s[1],f=Object(n.useState)(""),h=Object(i.a)(f,2),x=h[0],y=h[1],C=Object(n.useState)(0),A=Object(i.a)(C,2),L=A[0],G=A[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(w.a,{show:l,onHide:function(){return b(!1)},children:[Object(p.jsxs)(w.a.Header,{children:[Object(p.jsx)(w.a.Title,{children:L?"Uploading...":"Upload Image"}),Object(p.jsx)(g.a,{type:"button",variant:"white",bg:"white",onClick:function(){return b(!1)},children:Object(p.jsx)(m.a,{icon:j.a})})]}),Object(p.jsx)(w.a.Body,{children:L?Object(p.jsx)(S.a,{variant:"primary",now:L}):Object(p.jsxs)(N.a,{onSubmit:function(e){if(e.preventDefault(),!x)return O()("Error","Please Insert an Image!","error");if(a.filter((function(e){return e.data.name===x.name})).length>0)return y(""),O()("Error","The image ".concat(x.name," is already present"),"error");if(x){var n=d.ref("images/".concat(x.name));n.put(x).on("state_change",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);G(t)}),(function(e){return O()("Error",e.message,"error")}),Object(I.a)(v.a.mark((function e(){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getDownloadURL();case 2:a=e.sent,u.collection("images").add({name:x.name,url:a}).then(function(){var e=Object(I.a)(v.a.mark((function e(a){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.get();case 2:n=e.sent,t((function(e){return[].concat(Object(o.a)(e),[{data:n.data(),id:n.id}])})),c((function(e){return[].concat(Object(o.a)(e),[{data:n.data(),id:n.id}])})),O()("Good job!","Image added successfully!","success"),G(0),y(""),b(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)}))))}},children:[Object(p.jsx)(N.a.Group,{controlId:"formBasicFile",children:Object(p.jsx)("input",{type:"file",className:"form-control",accept:"image/png, image/jpg, image/jpeg",onChange:function(e){return y(e.target.files[0])}})}),Object(p.jsx)(N.a.Group,{controlId:"formBasicSubmit",className:"my-2",children:Object(p.jsx)(g.a,{type:"submit",variant:"dark",className:"form-control btn-block navbar-custom",children:"Upload image"})})]})})]}),Object(p.jsxs)(k.a,{sticky:"top",variant:"dark",className:"navbar-custom",children:[Object(p.jsx)(B.a,{as:F.a,className:"font",href:"/",style:{marginLeft:"50px"},children:"Photo Gallary"}),Object(p.jsx)(g.a,{variant:"outline-light",size:"sm",style:{marginLeft:"auto",marginRight:"50px"},onClick:function(){return b(!0)},children:"Upload"})]})]})},A=a(93),L=a(73),G=a(100);var R=function(e){var t=e.setImages,a=e.allImages,r=c.a.useRef(null),s=Object(n.useState)(""),o=Object(i.a)(s,2),l=o[0],u=o[1];return Object(n.useEffect)((function(){t(a.filter((function(e){return e.data.name.toLowerCase().includes(l.trim())}))),r.current.focus()})),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(b.a,{children:["&sakthi",Object(p.jsx)(A.a,{className:"justify-content-md-center",children:Object(p.jsx)(L.a,{className:"mx-auto my-5 md-12 text-center xs-6",children:Object(p.jsx)(N.a.Group,{controlId:"formBasic",children:Object(p.jsx)(G.a,{children:Object(p.jsx)(N.a.Control,{className:" border-0 border-bottom outline-0",style:{boxShadow:"none"},type:"text",placeholder:"Search...",ref:r,onChange:function(e){return u(e.target.value)}})})})})})]})})};var E=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),s=Object(i.a)(r,2),l=s[0],d=s[1];return Object(n.useEffect)((function(){u.collection("images").get().then((function(e){e.forEach((function(e){c((function(t){return[].concat(Object(o.a)(t),[{data:e.data(),id:e.id}])})),d((function(t){return[].concat(Object(o.a)(t),[{data:e.data(),id:e.id}])}))}))}))}),[]),Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(C,{setImages:c,setAllImages:d,images:a}),Object(p.jsx)(R,{setImages:c,allImages:l}),Object(p.jsx)(x,{images:a,setImages:c,allImages:l,setAllImages:d})]})},P=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,101)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(E,{})}),document.getElementById("root")),P()}},[[87,1,2]]]);
//# sourceMappingURL=main.a7f72fc5.chunk.js.map